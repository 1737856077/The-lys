<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
	<title>微信菜单管理-编辑菜单</title>
	<link type="text/css" rel="stylesheet" href="__PUBLIC__/Admin/css/index.css"/>
    <link type="text/css" rel="stylesheet" href="__PUBLIC__/Admin/css/public.css"/>
	<script type="text/javascript" src="__PUBLIC__/Admin/js/jquery.js"></script>
    <script type="text/javascript" src="__PUBLIC__/javascript/myString.js"></script>
	<script type="text/javascript" src="__PUBLIC__/javascript/function.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/PublicUser.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/WechatMenuAdd.js"></script>
    <script type="text/javascript" src="__PUBLIC__/Admin/js/PublicMaterialPushAjax.js"></script>
</head>
<style type="text/css">
.ErrorRed{ color:#e74649; /* padding-left: 2%; */ font-size: 14px; display: inline-block;}
</style>

<body>
        <div class="menus_r">
        		<div class="maps">
                    <i></i>
                    <p class="current">您当前的位置：<a href="{:url('index/index')}">首页</a>&nbsp;>&nbsp; 微信菜单管理&nbsp;>&nbsp; 编辑菜单
  
                </div>
				<div class="div_height_15"></div>
                <!--column end-->    

 <form action="__URL__/update" method="post" enctype="multipart/form-data" name="form1" id="form1" onSubmit="javascript:return funsubmit_add();" autocomplete="off">               
				<input type="hidden" id="id" name="id" value="{$getone['id']}" />
                 <div class="clas_box" id="div_replay_news" style="margin-top:0px;  padding-bottom:0px; ">  
                	
                    <div class="class_con">
                        <label for="">父级菜单</label>　
                         <select class="" name="father_id" id="father_id">
                         		<option value="0">一级菜单</option>
                            	<volist name="ListWechatMenu" id="value" key="key">	
                                <option value="{$value['id']}" <if condition="$getone['father_id'] eq  $value['id']">selected="selected"</if>>{$value['title']}</option>
                             	</volist>   
                         </select>
                    </div>
                     <div class="class_con">
                        <label for="">类型</label>　
                         <select class="" name="data_type" id="data_type">
                                <!--<option value="click" <if condition="$getone['data_type'] eq 'click'">selected="selected"</if> >点击推事件</option>-->
                                <option value="view" <if condition="$getone['data_type'] eq 'view'">selected="selected"</if>>跳转URL</option>
                                <option value="media_id" <if condition="$getone['data_type'] eq 'media_id'">selected="selected"</if>>下发消息（除文本消息）</option>
                                <!--<option value="view_limited">跳转图文消息URL</option>-->
                         </select>
                    </div>
                    <div class="class_con">
                        <label for="">名称<font color="#FF0000">*</font></label>
                         <input type="text" name="title" id="title" value="{$getone['title']}" maxlength="8" onKeyPress="return noStrs(event);" onblur="onblur_title()" />
                         <span style="color:#F00;" id="span_title"></span>
                    </div>
                    <div class="class_con">
                        <label for="">跳转的URL</label>
                         <input type="text" name="url" id="url" value="{$getone['url']}" maxlength="255"  onblur="onblur_url()" />
                         <span>当类型为“跳转URL”时有效，并为必填项</span>
                         <span style="color:#F00;" id="span_url"></span>
                    </div>
                    <div class="class_con" style="display:none;">
                        <label for="">按钮的KEY</label>
                         <input type="text" name="btn_key" id="btn_key" value="{$getone['btn_key']}" maxlength="64" onKeyPress="return noStrs(event);" onblur="onblur_btn_key()" />
                         <span>当类型为“点击推事件”时有效，并为必填项</span>
                         <span style="color:#F00;" id="span_btn_key"></span>
                    </div>
                    <div class="class_con">
                        <label for="">素材的MediaId</label>
                         <input type="text" name="media_id" id="media_id" value="{$getone['media_id']}" maxlength="64" onKeyPress="return noStrs(event);" onblur="onblur_media_id()" />
                         <span>当类型为“下发消息（除文本消息）”或“跳转图文消息URL”时有效，并为必填项</span>
                         <a  onclick="Oclick_ShowBox('image')" id="alink_media_id"  class="class_con_alink_01">点击这里“从素材库选择”</a>　
                         <span style="color:#F00;" id="span_media_id"></span>
                    </div>
                    <div class="class_con" style="display:none;">
                        <label for="">&nbsp;</label>
                         <span>当类型为“下发消息（除文本消息）”或“跳转图文消息URL”时有效，并为必填项</span>
                    </div>
                    <div class="class_con">
                        <label for="">排序</label>
                         <input type="text" name="data_sort" id="data_sort" value="{$getone['data_sort']}" maxlength="10" onKeyPress="return noNumbers(event);"  />
                         <span>如果不填写默认为0</span>
                         <span style="color:#F00;" id="span_data_sort"></span>
                    </div>
                   <div class="class_con">
                        <label for="">描述</label>
                         <input type="text" name="description" id="description" value="{$getone['description']}" maxlength="10" onKeyPress="return noStrs(event);"  />
                    </div>
                </div>
                
                <div class="clas_box" style=" margin-top:0px; padding-top:0px;">  
                    <div class="de_y">
                    <button type="submit" class="de_y_l" style="background:#00b6ea">确定</button>
                    <button type="button" class="de_y_r" style="background:#9b8975" onclick="location.href='__URL__/index';" >返回</button>
                    </div>
                </div>
                <!-- classify end -->   
</form>			

				<div class="clas_box" id="div_replay_news" style="margin-top:0px; padding-top:0px; padding-bottom:0px; ">  
                        <div class="class_con">
                            <label for="">备注：</label>
                            <span>
                            1、自定义菜单最多包括3个一级菜单，每个一级菜单最多包含5个二级菜单。<br />
                            2、一级菜单最多4个汉字，二级菜单最多7个汉字，多出来的部分将会以“...”代替。<br />
                            3、创建自定义菜单后，由于微信客户端缓存，需要24小时微信客户端才会展现出来。测试时可以尝试取消关注公众账号后再次关注，则可以看到创建后的效果。<br />
                            4、当按钮的类型为“下发消息（除文本消息）media_id”和“跳转图文消息URL(view_limited)”类型时起作用。<br />
                            5、当按钮的类型为“点击推事件(click)”等点击类型时起作用，菜单KEY值，用于消息接口推送，不超过128字节。<br />
                            </span>
                        </div>
                </div>
        </div>
        
        
<div id="dialogBg" style="display:none;">
	<div id="dialog">
    	<input type="hidden" name="InputMaterialUrl" id="InputMaterialUrl" value="{:url('PublicMaterial/AjaxMaterial')}" autocomplete="off" />
        <input type="hidden" name="InputMaterialMusicUrl" id="InputMaterialMusicUrl" value="{:url('PublicMaterial/AjaxMaterialMusic')}" autocomplete="off" />
        
    	<div class="menus_r" id="div_material_mpnews" style="display:block;">
        		<input type="hidden" name="PageMaterial_news" id="PageMaterial_news" value="2" autocomplete="off" />
        		<div class="maps" style="margin-left:0px; margin-top:0px;">
                     <a href="javascript:Oclick_claseDialogBtn();" style="float:right;">X关闭　</a>
                </div>
                <ul class="tab_menu" style="margin-left:0px;">
                                <li onclick="Oclick_ShowBox('image')">图片素材</li>
                                <li onclick="Oclick_ShowBox('video')">视频素材</li>
                                <li onclick="Oclick_ShowBox('voice')">音频素材</li>
                                <li onclick="Oclick_ShowBox('mpnews')" class="selected">图文素材</li>
                </ul>
                <div class="mid" style="margin-left:0px; margin-top:0px;">
                    <table id="Table_news" style="border-collapse:collapse;margin-left:0px;" class="mid_con">
                        <tbody id="TableTbody_news">
                        <tr style="border-left:3px solid #e4e3e3" class="mid_01">
                        	<td class="mid_thr">标题</td>
                            <td class="mid_thr">选择</td>
                        </tr>
                        <volist name="ListWechatMaterialArticles" id="value">
                        <tr style="border-left:3px solid #cfbba9" class="mid_02">
                            <td>{$value['title']}</td>
                            <td><a href="javascript:GetWechatMaterial('{$value['media_id']}')">选中使用</a></td>
                        </tr>
                        </volist>
                        
                    	</tbody>
                    </table>
                    	<php>if(count($ListWechatMaterialArticles)<=10){</php>
                        <div class="interpret" style="margin-left:0px; text-align:center;" id="link_news" > 亲，没有更多了哈...</div>
                        <php>}else{</php>
                        <div class="interpret" style="margin-left:0px; text-align:center;" id="link_news" onclick="AjaxMaterialSearchInfo('news')">点击加载更多...</div>
                        <php>}</php>
                </div>
        </div>
        <div class="menus_r" id="div_material_image" style="display:none;">
        		<input type="hidden" name="PageMaterial_image" id="PageMaterial_image" value="1" autocomplete="off" />
        		<div class="maps" style="margin-top: 0px; margin-left:0px;">
                     <a href="javascript:Oclick_claseDialogBtn();" style="float:right;">X关闭　</a>
                </div>
                <ul class="tab_menu" style="margin-left:0px;">
                                <li onclick="Oclick_ShowBox('image')" class="selected">图片素材</li>
                                <li onclick="Oclick_ShowBox('video')">视频素材</li>
                                <li onclick="Oclick_ShowBox('voice')">音频素材</li>
                                <li onclick="Oclick_ShowBox('mpnews')">图文素材</li>
                </ul>
                <div class="mid" style="margin-left:0px; margin-top:0px;">
                    <table id="Table_image"  style="border-collapse:collapse;margin-left:0px;" class="mid_con">
                        <tbody id="TableTbody_image">
                        <tr style="border-left:3px solid #e4e3e3" class="mid_01">
                            <td class="mid_thr">文件</td>
                            <td class="mid_thr">时间</td>
                            <td class="mid_thr">选择</td>
                        </tr>
                        
                    	</tbody>
                    </table>
                    <div class="interpret" style="margin-left:0px; text-align:center;" id="link_image" onclick="AjaxMaterialSearchInfo('image')">点击加载更多...</div>
                    <script type="text/javascript">AjaxMaterialSearchInfo('image');</script>
                </div>
        </div>
        <div class="menus_r" id="div_material_video" style="display:none;">
        		<input type="hidden" name="PageMaterial_video" id="PageMaterial_video" value="2" autocomplete="off" />
        		<div class="maps" style="margin-top: 0px; margin-left:0px;">
                     <a href="javascript:Oclick_claseDialogBtn();" style="float:right;">X关闭　</a>
                </div>
                <ul class="tab_menu" style="margin-left:0px;">
                                <li onclick="Oclick_ShowBox('image')">图片素材</li>
                                <li onclick="Oclick_ShowBox('video')" class="selected">视频素材</li>
                                <li onclick="Oclick_ShowBox('voice')">音频素材</li>
                                <li onclick="Oclick_ShowBox('mpnews')">图文素材</li>
                </ul>
                <div class="mid" style="margin-left:0px; margin-top:0px;">
                    <table id="Table_video" style="border-collapse:collapse;margin-left:0px;" class="mid_con">
                        <tbody id="TableTbody_video">
                        <tr style="border-left:3px solid #e4e3e3" class="mid_01">
                            <td class="mid_thr">文件</td>
                            <td class="mid_thr">选择</td>
                        </tr>
                        <volist name="ListWechatMaterialVideo" id="value">
                        <tr style="border-left:3px solid #cfbba9" class="mid_02">
                            <td>{$value['title']}</td>
                            <td><a href="javascript:GetWechatMaterial('{$value['media_id']}')">选中使用</a></td>
                        </tr>
                        </volist>	
                    	</tbody>
                    </table>
                    <php>if(count($ListWechatMaterialVideo)<=10){</php>
                    <div class="interpret" style="margin-left:0px; text-align:center;" id="link_video" > 亲，没有更多了哈...</div>
                    <php>}else{</php>
                    <div class="interpret" style="margin-left:0px; text-align:center;" id="link_video" onclick="AjaxMaterialSearchInfo('video')">点击加载更多...</div>
                    <php>}</php>
                </div>
        </div>
        <div class="menus_r" id="div_material_voice" style="display:none;">
        		<input type="hidden" name="PageMaterial_voice" id="PageMaterial_voice" value="2" autocomplete="off" />
        		<div class="maps" style="margin-top: 0px; margin-left:0px;">
                     <a href="javascript:Oclick_claseDialogBtn();" style="float:right;">X关闭　</a>
                </div>
                <ul class="tab_menu" style="margin-left:0px;">
                                <li onclick="Oclick_ShowBox('image')">图片素材</li>
                                <li onclick="Oclick_ShowBox('video')">视频素材</li>
                                <li onclick="Oclick_ShowBox('voice')" class="selected">音频素材</li>
                                <li onclick="Oclick_ShowBox('mpnews')">图文素材</li>
                </ul>
                <div class="mid" style="margin-left:0px; margin-top:0px;">
                    <table id="Table_voice" style="border-collapse:collapse;margin-left:0px;" class="mid_con">
                        <tbody id="TableTbody_voice">
                        <tr style="border-left:3px solid #e4e3e3" class="mid_01">
                            <td class="mid_thr">文件</td>
                            <td class="mid_thr">选择</td>
                        </tr>
                        <volist name="ListWechatMaterialVoice" id="value">
                        <tr style="border-left:3px solid #cfbba9" class="mid_02">
                            <td>{$value['title']}</td>
                            <td><a href="javascript:GetWechatMaterial('{$value['media_id']}')">选中使用</a></td>
                        </tr>

                        </volist>
                    	</tbody>
                    </table>
                    <php>if(count($ListWechatMaterialVoice)<=10){</php>
                    <div class="interpret" style="margin-left:0px; text-align:center;" id="link_voice" > 亲，没有更多了哈...</div>
                    <php>}else{</php>
                    <div class="interpret" style="margin-left:0px; text-align:center;" id="link_voice" onclick="AjaxMaterialSearchInfo('voice')">点击加载更多...</div>
                    <php>}</php>
                </div>
        </div>
        
        
	</div>
</div>    
</body>
</html>